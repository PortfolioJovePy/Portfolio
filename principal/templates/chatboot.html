<html>
    <head>
        <style>
            .chat-container {
                width: 100%;
                padding: 4vw;
                height: 30vh;
                display: flex;
                flex-direction: column;
                justify-content: flex-end;
                border-radius: 10px;
                background-color: #ffffff;
                border: 1px solid #ccc;
                overflow-y: hidden;
            }
            .chat-messages {
                height: 80%;
                overflow-y: auto;
                padding: 10px;
                background-color: white;
                border-radius: 10px;
                margin-bottom: 10px;
                flex-grow: 1;
                display: flex;
                flex-direction: column;
                gap: 5px;
                word-wrap: break-word; /* Garantir que as mensagens não saiam da caixa */
            }

            .message.user {
                color: black;
                background-color: rgb(207, 253, 207);
                align-self: flex-end;
                padding: 8px 15px;
                border-radius: 10px;
                max-width: 70%; /* Limitar a largura da mensagem do usuário */
                word-wrap: break-word;
            }
            .message.assistant {
                background-color: white;
                color:black;
                align-self: flex-start;
                padding: 8px 15px;
                border-radius: 10px;
                max-width: 70%; /* Limitar a largura da mensagem do assistente */
                word-wrap: break-word;
            }
            .typing-indicator {
                font-style: italic;
                color: #6c757d;
            }

            #chat-input {
                width: 80%;
            }
            #chat-form {
                display: flex;
                gap: 10px;
            }
        </style>
    </head>
    <body>
        <div class="chat-container">
            <div id="chat-messages" class="chat-messages">
                <div class="message assistant"><strong>Assistente:</strong> Olá! Rodrigo está criando uma IA treinada com seus dados pessoais e documentos publicados, para que você possa conhecê-lo melhor por meio dela. Enquanto isso, que tal começarmos uma conversa sobre qualquer outro assunto?</div>
            </div>
            <form id="chat-form" class="input-group mt-2 text-{{request.theme}}" onsubmit="sendMessage(event)">
                <input type="text" id="chat-input" class="form-control" placeholder="Envie sua mensagem" required>
                <button type="submit" class="btn btn-outline-{{request.theme}}">Enviar</button>
            </form>
        </div>

        <script>
            function sendMessage(event) {
                event.preventDefault();
                const userMessage = document.getElementById('chat-input').value;
                if (userMessage.trim() !== '') {
                    addMessage(userMessage, 'user');
                    document.getElementById('chat-input').value = '';
                    // Simulate assistant response
                    setTimeout(() => {
                        addMessage('Esta é uma resposta automatizada. Como posso ajudar?', 'assistant');
                    }, 1000);
                }
            }

            function addMessage(message, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message', sender);
                messageDiv.textContent = message;
                document.getElementById('chat-messages').appendChild(messageDiv);
                // Scroll to the latest message
                document.getElementById('chat-messages').scrollTop = document.getElementById('chat-messages').scrollHeight;
            }
        </script>
    </body>
</html>
